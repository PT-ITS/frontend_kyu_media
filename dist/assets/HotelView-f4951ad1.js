import{_ as S,b as v,f as g,g as a,F as N,z as j,t as u,C as w,e as f,i as _,n as H,l as P,j as d,v as c,D as x,E as k,x as D,y as I}from"./index-ff3a5314.js";import{a as M}from"./axios-a342f982.js";import{S as y}from"./sweetalert2.all-ba5903e9.js";import{S as V}from"./Sidebar-a0c60a62.js";import{N as C,F as T}from"./Footer-a99f178f.js";/* empty css                                                     */import{r as U}from"./readXlsxFileBrowser-e2c7cc3d.js";import{M as L}from"./MapsView-2ebcbd3a.js";import"./leaflet.curve-0e7c6766.js";const A={data(){return{karyawanList:[]}},mounted(){this.loadKaryawanData()},methods:{loadKaryawanData(){const t=localStorage.getItem("dataKaryawan");t&&(this.karyawanList=JSON.parse(t))},simpanData(){const t=document.getElementById("karyawanForm"),o={namaKaryawan:t.namaKaryawan.value,pendidikanKaryawan:t.pendidikanKaryawan.value,jenisKelamin:t.jenisKelamin.value,sertifikasiKaryawan:t.sertifikasiKaryawan.value,jabatanKaryawan:t.jabatanKaryawan.value,alamatKaryawan:t.alamatKaryawan.value,wargaNegara:t.wargaNegara1.checked?"WNI":"WNA"};let n=localStorage.getItem("dataKaryawan");n?n=JSON.parse(n):n=[],n.push(o),localStorage.setItem("dataKaryawan",JSON.stringify(n)),t.reset(),$("#tambahKaryawan").modal("hide"),this.loadKaryawanData()},hapusKaryawan(t){this.karyawanList.splice(t,1),localStorage.setItem("dataKaryawan",JSON.stringify(this.karyawanList))},onFileChange(t){let o=t.target.files?t.target.files[0]:null;o&&U(o).then(n=>{console.log("rows:",n);const h=n[0],e=n.slice(1).map(r=>{let i={};return h.forEach((m,b)=>{let p=r[b];m.toLowerCase()==="jeniskelamin"&&(p=p.toLowerCase()==="laki-laki"?"1":"0"),m.toLowerCase()==="sertifikasikaryawan"&&(p=p.toLowerCase()==="yes"?"1":"0"),i[m]=p}),i});console.log("Formatted Data:",e),localStorage.setItem("dataKaryawan",JSON.stringify(e)),this.loadKaryawanData(),$("#importKaryawan").modal("hide")}).catch(n=>{console.error("Error reading the Excel file:",n)})}}},J={class:"modal fade",id:"tambahKaryawan",tabindex:"-1",role:"dialog","aria-labelledby":"tambahKaryawanLabel","aria-hidden":"true"},W={class:"modal-dialog",role:"document"},F={class:"modal-content"},B=w('<div class="modal-header"><h5 class="modal-title" id="tambahKaryawanLabel"> Tambah Data Karyawan </h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body"><form id="karyawanForm"><div class="mb-3"><label for="namaKaryawan" class="form-label">Nama Lengkap</label><input type="text" class="form-control" id="namaKaryawan" placeholder="masukkan nama lengkap"></div><div class="mb-3"><label for="pendidikanPj" class="form-label">Pendidikan</label><select class="form-select" aria-label="Default select example" id="pendidikanKaryawan"><option selected disabled value="Pilih pendidikan"> Pilih pendidikan </option><option value="SD/MI">SD/MI</option><option value="SMP/MTS">SMP/MTS</option><option value="SMA/SMK/MA">SMA/SMK/MA</option><option value="D3/S1/D4">D3/S1/D4</option><option value="S2">S2</option><option value="S3">S3</option></select></div><div class="row"><div class="col-sm-6"><div class="mb-3"><label for="jenisKelamin" class="form-label">Jenis Kelamin</label><select class="form-select" id="jenisKelamin" aria-label="Default select example"><option selected>Pilih Jenis Kelamin</option><option value="1">Laki-laki</option><option value="0">Perempuan</option></select></div></div><div class="col-sm-6"><div class="mb-3"><label for="sertifikasiKaryawan" class="form-label">Sertifikasi</label><select class="form-select" id="sertifikasiKaryawan" aria-label="Default select example"><option selected>Pilih Status Sertifikasi</option><option value="1">Tersertifikasi</option><option value="0">Belum Tersertifikasi</option></select></div></div></div><div class="mb-3"><label for="jabatanKaryawan" class="form-label">Jabatan</label><input type="text" class="form-control" id="jabatanKaryawan" placeholder="masukkan jabatanKaryawan"></div><div class="mb-3"><label for="alamatKaryawan" class="form-label">Alamat</label><textarea class="form-control" id="alamatKaryawan" rows="3"></textarea></div><div class="mb-3"><label for="wargaNegara" class="form-label">Kewarganegaraan</label><div class="row ms-3"><div class="col-sm-6"><div class="form-check"><input class="form-check-input" type="radio" name="wargaNegara" id="wargaNegara1" value="WNI"><label class="form-check-label" for="wargaNegara1"> WNI </label></div></div><div class="col-sm-6"><div class="form-check"><input class="form-check-input" type="radio" name="wargaNegara" id="wargaNegara2" value="WNA"><label class="form-check-label" for="wargaNegara2"> WNA </label></div></div></div></div></form></div>',2),E={class:"modal-footer"},O=a("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Batal ",-1),z={class:"modal fade",id:"importKaryawan",tabindex:"-1",role:"dialog","aria-labelledby":"importKaryawanLabel","aria-hidden":"true"},R={class:"modal-dialog",role:"document"},X={class:"modal-content"},q=a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"importKaryawanLabel"}," Import Data Karyawan "),a("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[a("span",{"aria-hidden":"true"},"×")])],-1),G={class:"modal-body"},Q={id:"karyawanForm"},Y={class:"mb-3"},Z=a("label",{for:"fileExcel",class:"form-label"},"File Excel",-1),aa={class:"table-responsive"},oa={class:"table"},ea=a("thead",null,[a("tr",null,[a("th",{scope:"col"},"No"),a("th",{scope:"col"},"Nama"),a("th",{scope:"col"},"Jabatan"),a("th",{scope:"col"},"Alamat"),a("th",{scope:"col"},"Jenis Kelamin"),a("th",{scope:"col"},"Kewarganegaraan"),a("th",{scope:"col"},"Sertifikasi"),a("th",{scope:"col"},"Aksi")])],-1),ta={scope:"row"},sa=["onClick"];function la(t,o,n,h,e,r){return v(),g("div",null,[a("div",J,[a("div",W,[a("div",F,[B,a("div",E,[O,a("button",{type:"button",class:"btn blueButton",onClick:o[0]||(o[0]=(...i)=>r.simpanData&&r.simpanData(...i))}," Simpan ")])])])]),a("div",z,[a("div",R,[a("div",X,[q,a("div",G,[a("form",Q,[a("div",Y,[Z,a("input",{type:"file",class:"form-control placeholder",id:"fileExcel",onChange:o[1]||(o[1]=(...i)=>r.onFileChange&&r.onFileChange(...i))},null,32)])])])])])]),a("div",aa,[a("table",oa,[ea,a("tbody",null,[(v(!0),g(N,null,j(e.karyawanList,(i,m)=>(v(),g("tr",{key:m},[a("th",ta,u(m+1),1),a("td",null,u(i.namaKaryawan),1),a("td",null,u(i.jabatanKaryawan),1),a("td",null,u(i.alamatKaryawan),1),a("td",null,u(i.jenisKelamin=="1"?"Laki-laki":"Perempuan"),1),a("td",null,u(i.wargaNegara),1),a("td",null,u(i.sertifikasiKaryawan=="1"?"Iya":"Tidak"),1),a("td",null,[a("button",{class:"btn btn-danger",type:"button",onClick:b=>r.hapusKaryawan(m)}," Hapus ",8,sa)])]))),128))])])])])}const na=S(A,[["render",la]]);const ia={components:{Sidebar:V,Navbar:C,Footer:T,TabelKaryawan:na,MapsView:L},data(){return{sidebarToggled:!1,sidebarClass:"",formHotel:{namaHotel:"",bintangHotel:"",kamarVip:"",kamarStandart:"",alamat:"",koordinat:"",namaPj:"",emailPj:"",passwordPj:"",nikPj:"",pendidikanPj:"",teleponPj:"",wargaNegaraPj:"WNI",surveyor_id:"1",nib:"",resiko:"",skalaUsaha:""}}},created(){const t=sessionStorage.getItem("token");if(this.myToken=t,t)try{const[o,n]=t.split("."),h=JSON.parse(atob(o)),e=atob(n),r=JSON.parse(atob(t.split(".")[1])),i=r.exp,m=new Date(i*1e3);console.log("Waktu Kedaluwarsa (UTC):",m.toUTCString()),new Date>m?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const b=r.level;this.user_id=r.id,console.log("ini idddd:",this.user_id),b!=="0"?this.$router.push("/unauthorized"):(!h||!e)&&this.$router.push("/")}catch(o){console.error("Error decoding token:",o),this.$router.push("/")}else this.$router.push("/")},methods:{toggleSidebar(){this.sidebarToggled=!this.sidebarToggled,this.sidebarClass=this.sidebarToggled?"toggled":""},handleLocationSelected(t){console.log("Location selected:",t),this.formHotel.koordinat=t},getKaryawanData(){const t=localStorage.getItem("dataKaryawan");return t?JSON.parse(t):[]},async simpanDataHotel(){try{const t={hotel:this.formHotel,karyawan:this.getKaryawanData()},o=await M.post("https://api.surveiwisatadki.com/api/hotel/input-hotel",t,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});console.log(o.data),y.fire("Success","Data berhasil disimpan!","success"),Object.keys(this.formHotel).forEach(n=>{this.formHotel[n]=""}),localStorage.removeItem("dataKaryawan"),this.$router.push("/survey-dashboard")}catch(t){console.error(t),y.fire("Error","Terjadi kesalahan saat menyimpan data.","error")}}}},l=t=>(D("data-v-1793b4a1"),t=t(),I(),t),ra={id:"wrapper"},da={id:"content-wrapper",class:"d-flex flex-column"},ca={id:"content"},ma={class:"container-fluid mt-4"},pa=l(()=>a("h1",{class:"mb-0 fw-bold customJudul"},"Selamat Datang!",-1)),ua=l(()=>a("p",null,"Semangat semoga harimu menyenangkan",-1)),ba={class:"customBox mt-3"},ha={class:"container-fluid"},fa=l(()=>a("h6",{class:"fw-bold pt-3 mb-3",style:{"font-size":"20px"}}," Input Data Hotel ",-1)),_a={class:"row"},va={class:"col-sm-6"},ga={class:"mb-3"},wa=l(()=>a("label",{for:"namaHotel",class:"form-label"},"Nama Hotel",-1)),ka={class:"col-sm-6"},ya={class:"mb-3"},Sa=l(()=>a("label",{for:"jenisHotel",class:"form-label"},"Bintang Hotel",-1)),Ka={class:"row"},Na={class:"col-sm-6"},ja={class:"mb-3"},Ha=l(()=>a("label",{for:"penanggungJawab",class:"form-label"},"Penanggung Jawab",-1)),Pa={class:"col-sm-6"},xa={class:"mb-3"},Da=l(()=>a("label",{for:"nomorhp",class:"form-label"},"Nomor Telepon",-1)),Ia={class:"row"},Ma={class:"col-sm-6"},Va={class:"mb-3"},Ca=l(()=>a("label",{for:"emailPj",class:"form-label"},"Email",-1)),Ta={class:"col-sm-6"},Ua={class:"mb-3"},La=l(()=>a("label",{for:"passwordPj",class:"form-label"},"Password",-1)),Aa={class:"row"},Ja={class:"col-sm-6"},Wa={class:"mb-3"},Fa=l(()=>a("label",{for:"std",class:"form-label"},"Kamar VIP",-1)),Ba={class:"col-sm-6"},Ea={class:"mb-3"},Oa=l(()=>a("label",{for:"vip",class:"form-label"},"Kamar Standard",-1)),za={class:"row"},Ra={class:"col-sm-3"},Xa={class:"mb-3"},qa=l(()=>a("label",{for:"nik",class:"form-label"},"NIK",-1)),Ga={class:"col-sm-3"},Qa={class:"mb-3"},Ya=l(()=>a("label",{for:"pendidikanPj",class:"form-label"},"Pendidikan",-1)),Za=w('<option selected disabled value="Pilih pendidikan" data-v-1793b4a1> Pilih pendidikan </option><option value="SD/MI" data-v-1793b4a1>SD/MI</option><option value="SMP/MTS" data-v-1793b4a1>SMP/MTS</option><option value="SMA/SMK/MA" data-v-1793b4a1>SMA/SMK/MA</option><option value="D3/S1/D4" data-v-1793b4a1>D3/S1/D4</option><option value="S2" data-v-1793b4a1>S2</option><option value="S3" data-v-1793b4a1>S3</option>',7),$a=[Za],ao={class:"col-sm-6"},oo=l(()=>a("label",{for:"wargaNegaraPj",class:"form-label"},"Kewarganegaraan",-1)),eo={class:"row"},to={class:"col-sm-6"},so={class:"form-check"},lo=l(()=>a("label",{class:"form-check-label",for:"wargaNegaraPjWNI"}," Warga Negara Indonesia ",-1)),no={class:"col-sm-6"},io={class:"form-check"},ro=l(()=>a("label",{class:"form-check-label",for:"wargaNegaraPjWNA"}," Warga Negara Asing ",-1)),co={class:"row"},mo={class:"col-sm-4"},po={class:"mb-3"},uo=l(()=>a("label",{for:"nib",class:"form-label"},"NIB",-1)),bo={class:"col-sm-4"},ho={class:"mb-3"},fo=l(()=>a("label",{for:"resiko",class:"form-label"},"Resiko",-1)),_o={class:"col-sm-4"},vo={class:"mb-3"},go=l(()=>a("label",{for:"skalaUsaha",class:"form-label"},"Skala Usaha",-1)),wo={class:"row"},ko={class:"col-sm-6"},yo={class:"mb-3"},So=l(()=>a("label",{for:"alamat",class:"form-label"},"Alamat",-1)),Ko={class:"col-sm-6"},No=w('<div class="dropdown" data-v-1793b4a1><button class="btn btnCustomColor mt-3 dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false" data-v-1793b4a1> Tambah Karyawan </button><div class="dropdown-menu" data-v-1793b4a1><a class="dropdown-item" href="#" data-toggle="modal" data-target="#importKaryawan" data-v-1793b4a1>Import By Excel</a><a class="dropdown-item" href="#" data-toggle="modal" data-target="#tambahKaryawan" data-v-1793b4a1>Manual Input</a></div></div><a class="btn btnCustomColor ms-2 mt-3" href="/format_data_karyawan.xlsx" download data-v-1793b4a1> Download Contoh Import </a>',2),jo=l(()=>a("button",{type:"submit",class:"btn btnCustomColor ps-5 pe-5 pt-2 pb-2"}," Simpan Data ",-1));function Ho(t,o,n,h,e,r){const i=f("Sidebar"),m=f("Navbar"),b=f("MapsView"),p=f("TabelKaryawan"),K=f("Footer");return v(),g("div",ra,[_(i,{class:H(e.sidebarClass)},null,8,["class"]),a("div",da,[a("div",ca,[_(m,{onToggleSidebar:r.toggleSidebar},null,8,["onToggleSidebar"]),a("div",ma,[pa,ua,a("div",ba,[a("div",ha,[fa,a("form",{onSubmit:o[16]||(o[16]=P((...s)=>r.simpanDataHotel&&r.simpanDataHotel(...s),["prevent"]))},[a("div",_a,[a("div",va,[a("div",ga,[wa,d(a("input",{type:"text",class:"form-control custom-input",id:"namaHotel",placeholder:"masukkan nama hotel","onUpdate:modelValue":o[0]||(o[0]=s=>e.formHotel.namaHotel=s)},null,512),[[c,e.formHotel.namaHotel]])])]),a("div",ka,[a("div",ya,[Sa,d(a("input",{type:"text",class:"form-control custom-input",id:"jenisHotel",placeholder:"masukkan bintang hotel","onUpdate:modelValue":o[1]||(o[1]=s=>e.formHotel.bintangHotel=s)},null,512),[[c,e.formHotel.bintangHotel]])])])]),a("div",Ka,[a("div",Na,[a("div",ja,[Ha,d(a("input",{type:"text",class:"form-control custom-input",id:"penanggungJawab",placeholder:"masukkan nama penanggung jawab","onUpdate:modelValue":o[2]||(o[2]=s=>e.formHotel.namaPj=s)},null,512),[[c,e.formHotel.namaPj]])])]),a("div",Pa,[a("div",xa,[Da,d(a("input",{type:"text",class:"form-control custom-input",id:"nomorhp",placeholder:"masukkan nomor telepon","onUpdate:modelValue":o[3]||(o[3]=s=>e.formHotel.teleponPj=s)},null,512),[[c,e.formHotel.teleponPj]])])])]),a("div",Ia,[a("div",Ma,[a("div",Va,[Ca,d(a("input",{type:"email",class:"form-control custom-input",id:"emailPj",placeholder:"masukkan email penanggung jawab","onUpdate:modelValue":o[4]||(o[4]=s=>e.formHotel.emailPj=s)},null,512),[[c,e.formHotel.emailPj]])])]),a("div",Ta,[a("div",Ua,[La,d(a("input",{type:"password",class:"form-control custom-input",id:"passwordPj",placeholder:"masukkan password penanggung jawab","onUpdate:modelValue":o[5]||(o[5]=s=>e.formHotel.passwordPj=s)},null,512),[[c,e.formHotel.passwordPj]])])])]),a("div",Aa,[a("div",Ja,[a("div",Wa,[Fa,d(a("input",{type:"text",class:"form-control custom-input",id:"vip",placeholder:"vip","onUpdate:modelValue":o[6]||(o[6]=s=>e.formHotel.kamarVip=s)},null,512),[[c,e.formHotel.kamarVip]])])]),a("div",Ba,[a("div",Ea,[Oa,d(a("input",{type:"text",class:"form-control custom-input",id:"std",placeholder:"std","onUpdate:modelValue":o[7]||(o[7]=s=>e.formHotel.kamarStandart=s)},null,512),[[c,e.formHotel.kamarStandart]])])])]),a("div",za,[a("div",Ra,[a("div",Xa,[qa,d(a("input",{type:"text",class:"form-control custom-input",id:"nik",placeholder:"masukkan nik","onUpdate:modelValue":o[8]||(o[8]=s=>e.formHotel.nikPj=s)},null,512),[[c,e.formHotel.nikPj]])])]),a("div",Ga,[a("div",Qa,[Ya,d(a("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":o[9]||(o[9]=s=>e.formHotel.pendidikanPj=s)},$a,512),[[x,e.formHotel.pendidikanPj]])])]),a("div",ao,[oo,a("div",eo,[a("div",to,[a("div",so,[d(a("input",{class:"form-check-input",type:"radio",name:"wargaNegaraPj",id:"wargaNegaraPjWNI",value:"WNI","onUpdate:modelValue":o[10]||(o[10]=s=>e.formHotel.wargaNegaraPj=s)},null,512),[[k,e.formHotel.wargaNegaraPj]]),lo])]),a("div",no,[a("div",io,[d(a("input",{class:"form-check-input",type:"radio",name:"wargaNegaraPj",id:"wargaNegaraPjWNA",value:"WNA","onUpdate:modelValue":o[11]||(o[11]=s=>e.formHotel.wargaNegaraPj=s)},null,512),[[k,e.formHotel.wargaNegaraPj]]),ro])])])])]),a("div",co,[a("div",mo,[a("div",po,[uo,d(a("input",{type:"text",class:"form-control",id:"nib",placeholder:"masukkan nib","onUpdate:modelValue":o[12]||(o[12]=s=>e.formHotel.nib=s)},null,512),[[c,e.formHotel.nib]])])]),a("div",bo,[a("div",ho,[fo,d(a("input",{type:"text",class:"form-control",id:"resiko",placeholder:"masukkan resiko","onUpdate:modelValue":o[13]||(o[13]=s=>e.formHotel.resiko=s)},null,512),[[c,e.formHotel.resiko]])])]),a("div",_o,[a("div",vo,[go,d(a("input",{type:"text",class:"form-control",id:"skalaUsaha",placeholder:"masukkan skala usaha","onUpdate:modelValue":o[14]||(o[14]=s=>e.formHotel.skalaUsaha=s)},null,512),[[c,e.formHotel.skalaUsaha]])])])]),a("div",wo,[a("div",ko,[a("div",yo,[So,d(a("textarea",{class:"form-control custom-input",id:"alamat",rows:"3","onUpdate:modelValue":o[15]||(o[15]=s=>e.formHotel.alamat=s)},null,512),[[c,e.formHotel.alamat]])])]),a("div",Ko,[_(b,{onLocationSelected:r.handleLocationSelected},null,8,["onLocationSelected"])])]),No,_(p),jo],32)])])])]),_(K)])])}const Lo=S(ia,[["render",Ho],["__scopeId","data-v-1793b4a1"]]);export{Lo as default};
