import{i as L,j as B,k as g,l as D,m as E,p as N,o as r,q as M,s as p,_ as x,r as O,c as m,b as a,a as R,h as _,v as S,x as U,y as A,z as F,d as f,A as j,e as G,B as H,C as J}from"./index-ebca6c7c.js";import{_ as q}from"./logo-42795f0e.js";import{a as z,S as W}from"./sweetalert2.all-93a692fd.js";const Y=L({props:{value:{default:""},chars:{default:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"},count:{default:5},hideLines:{type:Boolean,default:!1},customTextColor:{default:""},textColors:{default:()=>[]},isDirty:{type:Boolean,default:!0},width:{default:function(l){return l.count*30}},height:{default:50},canvasClass:{default:""},icon:{default:"refresh"},captchaFont:{default:"bold 28px sans-serif"}},emits:["isValid","getCode","update:modelValue"],setup(l,{emit:t}){const e=l,o=B(),c=g();let n=g(""),i=e.width,h=e.height;D(()=>{w()});const w=()=>{c.value.width=i,c.value.height=h;let s=c.value.getContext("2d");for(let d=0;d<e.count;d++){let v=Math.floor(Math.random()*e.chars.length),k=Math.random()*30*Math.PI/180,b=e.chars[v];n.value+=b;let V=10+d*25,y=30+Math.random()*8;s.font=e.captchaFont,s.translate(V,y),e.customTextColor?s.fillStyle=e.customTextColor:e.textColors.length?s.fillStyle=e.textColors[Math.floor(Math.random()*e.textColors.length)]:s.fillStyle=C(),s.rotate(k),s.fillText(b,0,0),s.rotate(-k),s.translate(-V,-y)}e.hideLines||P(),I()},P=()=>{let s=c.value.getContext("2d");for(let d=0;d<e.count;d++)s.strokeStyle=C(),s.beginPath(),s.moveTo(Math.random()*i,Math.random()*h),s.lineTo(Math.random()*i,Math.random()*h),s.stroke()},I=()=>{t("getCode",n.value)};E(()=>{n.value&&n.value===e.value?t("isValid",!0):t("isValid",!1)}),N(n,s=>{t("update:modelValue",s)});const C=()=>{let s=Math.floor(Math.random()*256),d=Math.floor(Math.random()*256),v=Math.floor(Math.random()*256);return"rgb("+s+","+d+","+v+")"},$=()=>{c.value.getContext("2d").clearRect(0,0,i,h),n.value="",w()},T=()=>p("div",{class:"vue_client_recaptcha"},[p("div",{class:"vue_client_recaptcha_icon",onClick:()=>$()},[p(o.icon?o.icon:"svg",{class:"vue_client_recaptcha_icon_svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M2 12a9 9 0 0 0 9 9c2.39 0 4.68-.94 6.4-2.6l-1.5-1.5A6.706 6.706 0 0 1 11 19c-6.24 0-9.36-7.54-4.95-11.95C10.46 2.64 18 5.77 18 12h-3l4 4h.1l3.9-4h-3a9 9 0 0 0-18 0Z",fill:"#333333"})])]),p("canvas",{id:"captcha_canvas",class:`captcha_canvas ${e.canvasClass}`,ref:c},n.value)]);return(s,d)=>(r(),M(T))}});const Z={components:{VueClientRecaptcha:Y},setup(){const l=g(""),t=U(),e=i=>{n.captchaCode=i},o=i=>{n.isValid=i,i&&c()},c=()=>{t.emit("emitCaptcha",!1)},n=g({captchaCode:null,isValid:!1});return{inputValue:l,data:n,getCaptchaCode:e,checkValidCaptcha:o,captchaM:c}}},K={class:"sample-captcha"},Q={class:"row mb-1"},X={class:"col-sm"},tt={class:"captcha-box"},et={class:"row"},at={class:"col-sm"},ot={class:"data-box"};function st(l,t,e,o,c,n){const i=O("VueClientRecaptcha");return r(),m("div",K,[a("div",Q,[a("div",X,[a("section",tt,[R(i,{value:o.inputValue,onGetCode:o.getCaptchaCode,onIsValid:o.checkValidCaptcha},null,8,["value","onGetCode","onIsValid"])])])]),a("div",et,[a("div",at,[a("section",ot,[_(a("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>o.inputValue=h),placeholder:"Masukkan captcha",class:"form-control",type:"text"},null,512),[[S,o.inputValue]])])])])])}const lt=x(Z,[["render",st]]);const u=l=>(H("data-v-53e9b402"),l=l(),J(),l),nt={class:"login-page"},it={class:"login-card"},ct=u(()=>a("img",{src:q,class:"mb-3",alt:"Logo",style:{width:"200px"}},null,-1)),dt={class:"input-group"},rt={class:"row"},ht=u(()=>a("label",{for:"email"},"Email",-1)),ut={class:"col-12"},pt={class:"input-group"},mt={class:"row"},ft=u(()=>a("label",{for:"password"},"Password",-1)),_t={class:"col-9"},gt=["type"],vt={class:"col"},wt={class:"form-group d-flex"},Ct={class:"custom-control custom-checkbox small"},kt=u(()=>a("label",{class:"custom-control-label",for:"customCheck"},"Ingat Saya",-1)),bt={key:0,class:"confirmHuman text-white"},Vt=u(()=>a("img",{width:"48",height:"48",src:"https://img.icons8.com/fluency/48/checked.png",alt:"checked"},null,-1)),yt=u(()=>a("div",null,null,-1)),Mt=["disabled"],xt={data(){return{form:{email:null,password:null},checked:!1,captchaValidate:!0,showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},captchaCode(l){this.captchaValidate=l},login(){const l=new FormData;l.append("email",this.form.email),l.append("password",this.form.password),z.post("https://apikyu.instinctechsolution.com/api/auth/login",l).then(t=>{if(this.checked===!0){const o=JSON.stringify(this.form);localStorage.setItem("login",o)}else localStorage.getItem("login")&&localStorage.removeItem("login");const e=t.data.access_token;sessionStorage.setItem("token",e),this.$router.push("/dashboard")}).catch(t=>{console.error(t),this.captchaValidate=!0,W.fire({icon:"error",title:"Oops...",text:"Login gagal. Periksa kembali email dan password Anda."})})}},created(){const l=localStorage.getItem("login");l&&(this.form=JSON.parse(l),this.checked=!0),sessionStorage.getItem("token")?this.$router.push("/dashboard"):this.$router.push("/login")}},St=Object.assign(xt,{__name:"LoginView",setup(l){return(t,e)=>(r(),m("div",nt,[a("div",it,[ct,a("form",{onSubmit:e[5]||(e[5]=A((...o)=>t.login&&t.login(...o),["prevent"]))},[a("div",dt,[a("div",rt,[ht,a("div",ut,[_(a("input",{type:"email",class:"form-control",id:"email",placeholder:"Masukkan Email","onUpdate:modelValue":e[0]||(e[0]=o=>t.form.email=o)},null,512),[[S,t.form.email]])])])]),a("div",pt,[a("div",mt,[ft,a("div",_t,[_(a("input",{type:t.showPassword?"text":"password",class:"form-control",id:"exampleInputPassword",placeholder:"Masukkan Password","onUpdate:modelValue":e[1]||(e[1]=o=>t.form.password=o)},null,8,gt),[[F,t.form.password]])]),a("div",vt,[t.showPassword?f("",!0):(r(),m("i",{key:0,class:"bi bi-eye-slash-fill btn btn-dark",onClick:e[2]||(e[2]=(...o)=>t.togglePasswordVisibility&&t.togglePasswordVisibility(...o))})),t.showPassword?(r(),m("i",{key:1,class:"bi bi-eye-fill btn btn-dark",onClick:e[3]||(e[3]=(...o)=>t.togglePasswordVisibility&&t.togglePasswordVisibility(...o))})):f("",!0)])])]),a("div",wt,[a("div",Ct,[_(a("input",{type:"checkbox",class:"custom-control-input",id:"customCheck","onUpdate:modelValue":e[4]||(e[4]=o=>t.checked=o)},null,512),[[j,t.checked]]),kt])]),t.captchaValidate===!1?(r(),m("div",bt,[Vt,G(" You are human ")])):f("",!0),t.captchaValidate===!0?(r(),M(lt,{key:1,onEmitCaptcha:t.captchaCode},null,8,["onEmitCaptcha"])):f("",!0),yt,a("button",{class:"btn btn-dark",type:"submit",disabled:t.captchaValidate}," Login ",8,Mt)],32)])]))}}),Tt=x(St,[["__scopeId","data-v-53e9b402"]]);export{Tt as default};
