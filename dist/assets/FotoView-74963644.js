import{S as b,N as y,F as v}from"./Footer-9a29b948.js";import{a as f,S as U}from"./sweetalert2.all-10b92cf6.js";import{P as _,D as k}from"./jquery.dataTables-c2b1e719.js";import{k as p,o as l,c as h,b as t,a as c,n as F,d as m,q as w,w as C,D,F as u,g as S,f as I,t as O}from"./index-41c00ed5.js";const B={id:"wrapper"},T={id:"content-wrapper",class:"d-flex flex-column"},A={id:"content"},H={class:"container-fluid my-4"},M={class:"row m-1"},j={class:"card p-3",style:{"border-radius":"25px"}},K=S('<div class="row mb-3"><div class="col-6"><div class="h5 font-weight-bold text-black">Foto</div></div><div class="d-flex justify-content-end col-6"><button class="btn btn-primary me-2" data-toggle="modal" data-target="#addData"><i class="bi bi-plus"></i> Tambah </button></div><div class="col-8"></div></div>',1),N={class:"table-responsive"},L={key:0,class:"preloader"},E=t("thead",null,[t("tr",null,[t("th",{scope:"col",style:{width:"50px"}},"No"),t("th",{scope:"col"},"Aksi"),t("th",{scope:"col"},"Foto Section Home"),t("th",{scope:"col"},"Foto Section Info"),t("th",{scope:"col"},"Foto Section Manfaat"),t("th",{scope:"col"},"Foto Section Cara Order")])],-1),V=["onClick"],z=t("i",{class:"bi bi-pencil-square"},null,-1),P=[z],x=["onClick"],q=t("i",{class:"bi bi-trash3-fill"},null,-1),J=[q],W=["src"],G=["src"],Q=["src"],R=["src"],X={class:"modal fade",id:"addData",tabindex:"-1",role:"dialog","aria-labelledby":"addDataLabel","aria-hidden":"true"},Y={class:"modal-dialog",role:"document"},Z={class:"modal-content"},tt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"addDataLabel"},"Tambah Data"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"×")])],-1),ot={class:"modal-body"},at={class:"form-group"},et=t("label",{for:"foto_home"},"Foto Section Home",-1),st=t("p",{class:"text-danger"},"Keterangan: Ukuran foto maksimal 2 mb",-1),nt={class:"form-group"},rt=t("label",{for:"foto_info"},"Foto Section Info",-1),dt=t("p",{class:"text-danger"},"Keterangan: Ukuran foto maksimal 2 mb",-1),lt={class:"form-group"},it=t("label",{for:"foto_manfaat"},"Foto Section Manfaat",-1),ft=t("p",{class:"text-danger"},"Keterangan: Ukuran foto maksimal 2 mb",-1),ht={class:"form-group"},ct=t("label",{for:"foto_order"},"Foto Section Cara Order",-1),pt=t("p",{class:"text-danger"},"Keterangan: Ukuran foto maksimal 2 mb",-1),mt={class:"modal-footer"},ut=t("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Batal ",-1),_t={class:"modal fade",id:"dataUpdate",tabindex:"-1",role:"dialog","aria-labelledby":"dataUpdateLabel","aria-hidden":"true"},gt={class:"modal-dialog",role:"document"},bt={class:"modal-content"},yt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"dataUpdateLabel"},"Update Data"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"×")])],-1),vt={class:"modal-body"},Ut={class:"form-group"},kt=t("label",{for:"foto_home"},"Foto Section Home",-1),Ft=t("p",{class:"text-danger"},"Keterangan: Ukuran foto maksimal 2 mb",-1),wt={class:"form-group"},Ct=t("label",{for:"foto_info"},"Foto Section Info",-1),Dt=t("p",{class:"text-danger"},"Keterangan: Ukuran foto maksimal 2 mb",-1),St={class:"form-group"},It=t("label",{for:"foto_manfaat"},"Foto Section Manfaat",-1),$t=t("p",{class:"text-danger"},"Keterangan: Ukuran foto maksimal 2 mb",-1),Ot={class:"form-group"},Bt=t("label",{for:"foto_order"},"Foto Section Cara Order",-1),Tt=t("p",{class:"text-danger"},"Keterangan: Ukuran foto maksimal 2 mb",-1),At={class:"modal-footer"},Ht=t("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Batal ",-1);_.use(k);const Mt={data(){return{dataList:[],tableOptions:{pagingType:"full_numbers"},dataCreate:{nama:"",foto_home:null,foto_info:null,foto_manfaat:null,foto_order:null},dataUpdate:{id:"",foto_home:null,foto_info:null,foto_manfaat:null,foto_order:null},ready:!1}},mounted(){},methods:{setDataUpdate(o,s,r,d,a){this.dataUpdate.id=o,this.dataUpdate.foto_home=s,this.dataUpdate.foto_info=r,this.dataUpdate.foto_manfaat=d,this.dataUpdate.foto_order=a},async sendUpdateData(){try{const o=new FormData;this.dataUpdate.foto_home instanceof File&&o.append("foto_home",this.dataUpdate.foto_home),this.dataUpdate.foto_info instanceof File&&o.append("foto_info",this.dataUpdate.foto_info),this.dataUpdate.foto_manfaat instanceof File&&o.append("foto_manfaat",this.dataUpdate.foto_manfaat),this.dataUpdate.foto_order instanceof File&&o.append("foto_order",this.dataUpdate.foto_order);const s=await f.post(`http://127.0.0.1:8000/api/foto/update/${this.dataUpdate.id}`,o,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${sessionStorage.getItem("token")}`}});console.log(s.data),this.dataUpdate={id:"",foto_home:null,foto_info:null,foto_manfaat:null,foto_order:null},this.$refs.foto_home.value="",this.$refs.foto_info.value="",this.$refs.foto_manfaat.value="",this.$refs.foto_order.value="",this.fetchData(),this.showAlert("Berhasil!","Data berhasil diupdate.","success")}catch(o){if(console.error(o),o.response&&o.response.data&&o.response.data.errors){const s=o.response.data.errors;let r=`Terjadi kesalahan:
`;for(let d in s)s.hasOwnProperty(d)&&(r+=`${s[d].join(", ")}
`);this.showError("Opps...",r,"error")}else this.showError("Opps...","Terjadi kesalahan saat menambahkan data.","error")}},async tambahData(){try{const o=new FormData;o.append("foto_home",this.dataCreate.foto_home),o.append("foto_info",this.dataCreate.foto_info),o.append("foto_manfaat",this.dataCreate.foto_manfaat),o.append("foto_order",this.dataCreate.foto_order);const s=await f.post("http://127.0.0.1:8000/api/foto/create",o,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${sessionStorage.getItem("token")}`}});console.log(s.data),this.dataCreate={foto_home:null,foto_info:null,foto_manfaat:null,foto_order:null},this.$refs.foto_home.value="",this.$refs.foto_info.value="",this.$refs.foto_manfaat.value="",this.$refs.foto_order.value="",this.fetchData(),this.showAlert("Berhasil!","Data berhasil ditambahkan.","success")}catch(o){if(console.error(o),o.response&&o.response.data&&o.response.data.errors){const s=o.response.data.errors;let r=`Terjadi kesalahan:
`;for(let d in s)s.hasOwnProperty(d)&&(r+=`${s[d].join(", ")}
`);this.showError("Opps...",r,"error")}else this.showError("Opps...","Terjadi kesalahan saat menambahkan data.","error")}},async fetchData(){this.ready=!1;try{const o=await f.get("http://127.0.0.1:8000/api/foto/list",{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});this.dataList=o.data.data,this.ready=!0}catch(o){console.error(o),this.showAlert("Opps...","Terjadi kesalahan saat mengambil data.","error")}},showAlert(o,s,r){this.$swal({title:o,text:s,icon:r}).then(()=>{$("#addData").modal("hide"),$("#dataUpdate").modal("hide")})},showError(o,s,r){this.$swal({title:o,text:s,icon:r}).then(()=>{})},async deleteData(o){try{const s=await f.delete(`http://127.0.0.1:8000/api/foto/delete/${o}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});console.log(s.data),this.fetchData(),this.showAlert("Success","Data berhasil didelete","success")}catch(s){console.error(s),this.showAlert("Oops...","Terjadi kesalahan saat mendelete data","error")}},konfirmasi(o){U.fire({title:"Apakah Anda yakin ingin menghapus data foto?",text:"Data akan dihapus jika anda menekan tombol Hapus.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ee0405",cancelButtonColor:"#858796",confirmButtonText:"Hapus",cancelButtonText:"Batal"}).then(s=>{s.isConfirmed&&this.deleteData(o)})},handleInputFotoHome(o){this.dataCreate.foto_home=o.target.files[0]},handleInputFotoInfo(o){this.dataCreate.foto_info=o.target.files[0]},handleInputFotoManfaat(o){this.dataCreate.foto_manfaat=o.target.files[0]},handleInputFotoOrder(o){this.dataCreate.foto_order=o.target.files[0]},handleUpdateFotoHome(o){this.dataUpdate.foto_home=o.target.files[0]},handleUpdateFotoInfo(o){this.dataUpdate.foto_info=o.target.files[0]},handleUpdateFotoManfaat(o){this.dataUpdate.foto_manfaat=o.target.files[0]},handleUpdateFotoOrder(o){this.dataUpdate.foto_order=o.target.files[0]},getImageUrl(o){return o!=null?`http://127.0.0.1:8000/storage/${o}`:"https://via.placeholder.com/150"}},created(){const o=sessionStorage.getItem("token");if(o)try{const[s,r]=o.split("."),d=JSON.parse(atob(s)),a=atob(r),e=JSON.parse(atob(o.split(".")[1])).exp,i=new Date(e*1e3);console.log("Waktu Kedaluwarsa (UTC):",i.toUTCString()),new Date>i?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/login")):console.log("Aman"),this.fetchData()}catch(s){console.error("Error decoding token:",s),this.$router.push("/login")}else this.$router.push("/login")}},Et=Object.assign(Mt,{__name:"FotoView",setup(o){const s=p(!1),r=p(""),d=()=>{s.value=!s.value,r.value=s.value?"toggled":""};return(a,n)=>(l(),h(u,null,[t("div",B,[c(b,{class:F(r.value)},null,8,["class"]),t("div",T,[t("div",A,[c(y,{onToggleSidebar:d}),t("div",H,[t("div",M,[t("div",j,[K,t("div",N,[a.ready?m("",!0):(l(),h("div",L)),a.ready?(l(),w(D(_),{key:1,class:"display table table-striped",options:a.tableOptions},{default:C(()=>[E,t("tbody",null,[(l(!0),h(u,null,I(a.dataList,(e,i)=>(l(),h("tr",{key:e.id},[t("td",null,O(i+1),1),t("td",null,[t("button",{class:"btn btn-warning me-1 mb-1","data-toggle":"modal","data-target":"#dataUpdate",onClick:g=>a.setDataUpdate(e.id,e.foto_home,e.foto_info,e.foto_manfaat,e.foto_order)},P,8,V),t("button",{class:"btn btn-danger me-1 mb-1",onClick:g=>a.konfirmasi(e.id)},J,8,x)]),t("td",null,[t("img",{src:a.getImageUrl(e.foto_home),alt:"Foto Section Home",class:"img-fluid",style:{width:"150px"}},null,8,W)]),t("td",null,[t("img",{src:a.getImageUrl(e.foto_info),alt:"Foto Section Info",class:"img-fluid",style:{width:"150px"}},null,8,G)]),t("td",null,[t("img",{src:a.getImageUrl(e.foto_manfaat),alt:"Foto Section Manfaat",class:"img-fluid",style:{width:"150px"}},null,8,Q)]),t("td",null,[t("img",{src:a.getImageUrl(e.foto_order),alt:"Foto Section Cara Order",class:"img-fluid",style:{width:"150px"}},null,8,R)])]))),128))])]),_:1},8,["options"])):m("",!0)])])])])]),c(v)])]),t("div",X,[t("div",Y,[t("div",Z,[tt,t("div",ot,[t("form",null,[t("div",at,[et,t("input",{type:"file",class:"form-control",id:"foto_home",onChange:n[0]||(n[0]=(...e)=>a.handleInputFotoHome&&a.handleInputFotoHome(...e)),ref:"foto_home"},null,544),st]),t("div",nt,[rt,t("input",{type:"file",class:"form-control",id:"foto_info",onChange:n[1]||(n[1]=(...e)=>a.handleInputFotoInfo&&a.handleInputFotoInfo(...e)),ref:"foto_info"},null,544),dt]),t("div",lt,[it,t("input",{type:"file",class:"form-control",id:"foto_manfaat",onChange:n[2]||(n[2]=(...e)=>a.handleInputFotoManfaat&&a.handleInputFotoManfaat(...e)),ref:"foto_manfaat"},null,544),ft]),t("div",ht,[ct,t("input",{type:"file",class:"form-control",id:"foto_order",onChange:n[3]||(n[3]=(...e)=>a.handleInputFotoOrder&&a.handleInputFotoOrder(...e)),ref:"foto_order"},null,544),pt])])]),t("div",mt,[ut,t("button",{type:"button",class:"btn btn-primary",onClick:n[4]||(n[4]=(...e)=>a.tambahData&&a.tambahData(...e))}," Kirim ")])])])]),t("div",_t,[t("div",gt,[t("div",bt,[yt,t("div",vt,[t("form",null,[t("div",Ut,[kt,t("input",{type:"file",class:"form-control",id:"foto_home",onChange:n[5]||(n[5]=(...e)=>a.handleUpdateFotoHome&&a.handleUpdateFotoHome(...e)),ref:"foto_home"},null,544),Ft]),t("div",wt,[Ct,t("input",{type:"file",class:"form-control",id:"foto_info",onChange:n[6]||(n[6]=(...e)=>a.handleUpdateFotoInfo&&a.handleUpdateFotoInfo(...e)),ref:"foto_info"},null,544),Dt]),t("div",St,[It,t("input",{type:"file",class:"form-control",id:"foto_manfaat",onChange:n[7]||(n[7]=(...e)=>a.handleUpdateFotoManfaat&&a.handleUpdateFotoManfaat(...e)),ref:"foto_manfaat"},null,544),$t]),t("div",Ot,[Bt,t("input",{type:"file",class:"form-control",id:"foto_order",onChange:n[8]||(n[8]=(...e)=>a.handleUpdateFotoOrder&&a.handleUpdateFotoOrder(...e)),ref:"foto_order"},null,544),Tt])])]),t("div",At,[Ht,t("button",{type:"button",class:"btn btn-danger",onClick:n[9]||(n[9]=(...e)=>a.sendUpdateData&&a.sendUpdateData(...e))}," Update ")])])])])],64))}});export{Et as default};
